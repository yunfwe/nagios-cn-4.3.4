<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nagios: runcmd.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>runcmd.h File Reference</h1>
<p>runcmd library function declarations  
<a href="#_details">More...</a></p>
<code>#include &lt;signal.h&gt;</code><br/>

<p><a href="runcmd_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a137b2e453f35e694292e3c9c26222dea">RUNCMD_HAS_REDIR</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return code bitflags for <a class="el" href="runcmd_8h.html#aca907b3c82a3885186b590f44a758079" title="Convert a string to a vector of arguments like a shell would.">runcmd_cmd2strv()</a>.  <a href="#a137b2e453f35e694292e3c9c26222dea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a627d7784a16a94482628b40989fc6fd0"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_SUBCOMMAND" ref="a627d7784a16a94482628b40989fc6fd0" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a627d7784a16a94482628b40989fc6fd0">RUNCMD_HAS_SUBCOMMAND</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">subcommands present <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c1913db9537a97d1eaf36dd571a9a89"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_PAREN" ref="a7c1913db9537a97d1eaf36dd571a9a89" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a7c1913db9537a97d1eaf36dd571a9a89">RUNCMD_HAS_PAREN</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">parentheses present in command <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accc702fcefbca1c9fcfb4d6250c301cf"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_JOBCONTROL" ref="accc702fcefbca1c9fcfb4d6250c301cf" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#accc702fcefbca1c9fcfb4d6250c301cf">RUNCMD_HAS_JOBCONTROL</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 3)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">job control stuff present <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a282866d10a90c2ce1f6e12c1b6f3b35a"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_UBSQ" ref="a282866d10a90c2ce1f6e12c1b6f3b35a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a282866d10a90c2ce1f6e12c1b6f3b35a">RUNCMD_HAS_UBSQ</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unbalanced single quotes <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3a09e28c161575948fd3e23bbc0fe62f"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_UBDQ" ref="a3a09e28c161575948fd3e23bbc0fe62f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a3a09e28c161575948fd3e23bbc0fe62f">RUNCMD_HAS_UBDQ</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unbalanced double quotes <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7604776ddc73f8fa2e32c4cc88499557"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_WILDCARD" ref="a7604776ddc73f8fa2e32c4cc88499557" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a7604776ddc73f8fa2e32c4cc88499557">RUNCMD_HAS_WILDCARD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wildcards present <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ff4773f5388adbf6811f83e7cb24590"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_SHVAR" ref="a8ff4773f5388adbf6811f83e7cb24590" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a8ff4773f5388adbf6811f83e7cb24590">RUNCMD_HAS_SHVAR</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">shell variables present <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a809d1418175a99f46a35070f5b59e6e2"></a><!-- doxytag: member="runcmd.h::RUNCMD_EFD" ref="a809d1418175a99f46a35070f5b59e6e2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a809d1418175a99f46a35070f5b59e6e2">RUNCMD_EFD</a>&nbsp;&nbsp;&nbsp;(-1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Failed to pipe() or open(). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8ffc6efe0e7c45e4df5b5f8e64f4139"></a><!-- doxytag: member="runcmd.h::RUNCMD_EALLOC" ref="ad8ffc6efe0e7c45e4df5b5f8e64f4139" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#ad8ffc6efe0e7c45e4df5b5f8e64f4139">RUNCMD_EALLOC</a>&nbsp;&nbsp;&nbsp;(-2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Failed to alloc. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08a1e2d5ee5aea3289e3f73116acda32"></a><!-- doxytag: member="runcmd.h::RUNCMD_ECMD" ref="a08a1e2d5ee5aea3289e3f73116acda32" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a08a1e2d5ee5aea3289e3f73116acda32">RUNCMD_ECMD</a>&nbsp;&nbsp;&nbsp;(-3)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bad command. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6f804d34b23a2b0ce80d0f4e984f9a8"></a><!-- doxytag: member="runcmd.h::RUNCMD_EFORK" ref="ad6f804d34b23a2b0ce80d0f4e984f9a8" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#ad6f804d34b23a2b0ce80d0f4e984f9a8">RUNCMD_EFORK</a>&nbsp;&nbsp;&nbsp;(-4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Failed to fork(). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a049ff19afdd6870b63cfaeaf3bfb4119"></a><!-- doxytag: member="runcmd.h::RUNCMD_EINVAL" ref="a049ff19afdd6870b63cfaeaf3bfb4119" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a049ff19afdd6870b63cfaeaf3bfb4119">RUNCMD_EINVAL</a>&nbsp;&nbsp;&nbsp;(-5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Invalid parameters. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab45ee0914807f380887acf8d78c197a9"></a><!-- doxytag: member="runcmd.h::RUNCMD_EWAIT" ref="ab45ee0914807f380887acf8d78c197a9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#ab45ee0914807f380887acf8d78c197a9">RUNCMD_EWAIT</a>&nbsp;&nbsp;&nbsp;(-6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Failed to wait(). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#ae3353ec3d6496563eff990f1f8f41b2f">runcmd_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the runcmd library.  <a href="#ae3353ec3d6496563eff990f1f8f41b2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#abaa915421b65f5c0f386cae83d43f776">runcmd_pid</a> (int fd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return pid of a command with a specific file descriptor.  <a href="#abaa915421b65f5c0f386cae83d43f776"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#ac264bd14731ff4521acaee5d505f85ec">runcmd_strerror</a> (int code)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return explanation of which system call or operation failed.  <a href="#ac264bd14731ff4521acaee5d505f85ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#aeb884965f5c8e2a4f4012d4d3e8da555">runcmd_open</a> (const char *cmd, int *pfd, int *pfderr, char **env, void(*iobreg)(int, int, void *), void *iobregarg) __attribute__((__nonnull__(1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start a command from a command string.  <a href="#aeb884965f5c8e2a4f4012d4d3e8da555"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a9ff3b864ee58ab1f4c22ca0bcd52a930">runcmd_close</a> (int fd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close a command and return its exit status.  <a href="#a9ff3b864ee58ab1f4c22ca0bcd52a930"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#aca907b3c82a3885186b590f44a758079">runcmd_cmd2strv</a> (const char *str, int *out_argc, char **out_argv)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a string to a vector of arguments like a shell would.  <a href="#aca907b3c82a3885186b590f44a758079"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89517237851fef77721db7aef7b87955"></a><!-- doxytag: member="runcmd.h::runcmd_free_pids" ref="a89517237851fef77721db7aef7b87955" args="(void)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="runcmd_8h.html#a89517237851fef77721db7aef7b87955">runcmd_free_pids</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If you're using libnagios to execute a remote command, the static pid_t pids is not freed after runcmd_open You can call this function when you're sure pids is no longer in use, to keep down memory leaks. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>runcmd library function declarations </p>
<p>A simple interface to executing programs from other programs, using an optimized and safer popen()-like implementation. It is considered safer in that no shell needs to be spawned for simple commands, and the environment passed to the execve()'d program is essentially empty.</p>
<p>This code is based on popen.c, which in turn was taken from "Advanced Programming in the UNIX Environment" by W. Richard Stevens.</p>
<p>Care has been taken to make sure the functions are async-safe. The exception is <a class="el" href="runcmd_8h.html#ae3353ec3d6496563eff990f1f8f41b2f" title="Initialize the runcmd library.">runcmd_init()</a> which multithreaded applications or plugins must call in a non-reentrant manner before calling any other runcmd function.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This is inherited from the nagiosplugins project, although it might need refactoring for performance later. </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a137b2e453f35e694292e3c9c26222dea"></a><!-- doxytag: member="runcmd.h::RUNCMD_HAS_REDIR" ref="a137b2e453f35e694292e3c9c26222dea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUNCMD_HAS_REDIR&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code bitflags for <a class="el" href="runcmd_8h.html#aca907b3c82a3885186b590f44a758079" title="Convert a string to a vector of arguments like a shell would.">runcmd_cmd2strv()</a>. </p>
<p>I/O redirection </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9ff3b864ee58ab1f4c22ca0bcd52a930"></a><!-- doxytag: member="runcmd.h::runcmd_close" ref="a9ff3b864ee58ab1f4c22ca0bcd52a930" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int int runcmd_close </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close a command and return its exit status. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Don't use this. It's a retarded way to reap children suitable only for launching a one-shot program.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fd</em>&nbsp;</td><td>The child's stdout filedescriptor </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>exit-status of the child, or -1 in case of errors </dd></dl>

</div>
</div>
<a class="anchor" id="aca907b3c82a3885186b590f44a758079"></a><!-- doxytag: member="runcmd.h::runcmd_cmd2strv" ref="aca907b3c82a3885186b590f44a758079" args="(const char *str, int *out_argc, char **out_argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int runcmd_cmd2strv </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>out_argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>out_argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert a string to a vector of arguments like a shell would. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This might have bugs and is only tested to behave similar to how /bin/sh does things. For csh or other non bash-ish shells there are no guarantees. </dd>
<dd>
The out_argv array has to be large enough to hold all strings found in the command. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>str</em>&nbsp;</td><td>The string to convert to an argument vector </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>out_argc</em>&nbsp;</td><td>The number of arguments found </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>out_argv</em>&nbsp;</td><td>The argument vector </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on (great) success, or a bitmask of failure-codes representing f.e. unclosed quotes, job control or output redirection. See the RUNCMD_HAS_* and their ilk to find out about the flag. </dd></dl>

</div>
</div>
<a class="anchor" id="ae3353ec3d6496563eff990f1f8f41b2f"></a><!-- doxytag: member="runcmd.h::runcmd_init" ref="ae3353ec3d6496563eff990f1f8f41b2f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void runcmd_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the runcmd library. </p>
<p>Only multi-threaded programs that might launch the first external program from multiple threads simultaneously need to bother with this, and they must ensure this is called at least once in a non-reentrant manner before calling any other runcmd function. </p>

</div>
</div>
<a class="anchor" id="aeb884965f5c8e2a4f4012d4d3e8da555"></a><!-- doxytag: member="runcmd.h::runcmd_open" ref="aeb884965f5c8e2a4f4012d4d3e8da555" args="(const char *cmd, int *pfd, int *pfderr, char **env, void(*iobreg)(int, int, void *), void *iobregarg) __attribute__((__nonnull__(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int runcmd_open </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>pfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>pfderr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(int, int, void *)&nbsp;</td>
          <td class="paramname"> <em>iobreg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>iobregarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start a command from a command string. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cmd</em>&nbsp;</td><td>The command to launch </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pfd</em>&nbsp;</td><td>Child's stdout filedescriptor </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pfderr</em>&nbsp;</td><td>Child's stderr filedescriptor </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>Currently ignored for portability </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>iobreg</em>&nbsp;</td><td>The callback function to register the iobrokers for the read ends of the pipe </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>iobregarg</em>&nbsp;</td><td>The "arg" value to pass to <a class="el" href="iobroker_8h.html#ac3d3b9c54f65c31ce8ade64ef0bea74c" title="Register a socket for input polling with the broker.">iobroker_register()</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abaa915421b65f5c0f386cae83d43f776"></a><!-- doxytag: member="runcmd.h::runcmd_pid" ref="abaa915421b65f5c0f386cae83d43f776" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t runcmd_pid </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return pid of a command with a specific file descriptor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fd</em>&nbsp;</td><td>stdout filedescriptor of the child to get pid from </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pid of the child, or 0 on errors </dd></dl>

</div>
</div>
<a class="anchor" id="ac264bd14731ff4521acaee5d505f85ec"></a><!-- doxytag: member="runcmd.h::runcmd_strerror" ref="ac264bd14731ff4521acaee5d505f85ec" args="(int code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* runcmd_strerror </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>code</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return explanation of which system call or operation failed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>code</em>&nbsp;</td><td>Error code returned by a library function </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A non-free()'able string explaining where the error occurred </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 9 Sep 2017 for Nagios by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
