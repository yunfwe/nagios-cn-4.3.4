<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nagios: nsock.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>nsock.h File Reference</h1>
<p>Nagios socket helper library.  
<a href="#_details">More...</a></p>
<code>#include &lt;errno.h&gt;</code><br/>

<p><a href="nsock_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0719a5e25867170046a6ec49cfe83384"></a><!-- doxytag: member="nsock.h::NSOCK_EBIND" ref="a0719a5e25867170046a6ec49cfe83384" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a0719a5e25867170046a6ec49cfe83384">NSOCK_EBIND</a>&nbsp;&nbsp;&nbsp;(-1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">failed to bind() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf7eb022fc5569eac2294a3cc5af3d94"></a><!-- doxytag: member="nsock.h::NSOCK_ELISTEN" ref="aaf7eb022fc5569eac2294a3cc5af3d94" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#aaf7eb022fc5569eac2294a3cc5af3d94">NSOCK_ELISTEN</a>&nbsp;&nbsp;&nbsp;(-2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">failed to listen() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4c2490a03d1859f9205c10b16f2d7c2"></a><!-- doxytag: member="nsock.h::NSOCK_ESOCKET" ref="ac4c2490a03d1859f9205c10b16f2d7c2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#ac4c2490a03d1859f9205c10b16f2d7c2">NSOCK_ESOCKET</a>&nbsp;&nbsp;&nbsp;(-3)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">failed to socket() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4cc22bbcfa712fddb19d3e5ea9f3279"></a><!-- doxytag: member="nsock.h::NSOCK_EUNLINK" ref="aa4cc22bbcfa712fddb19d3e5ea9f3279" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#aa4cc22bbcfa712fddb19d3e5ea9f3279">NSOCK_EUNLINK</a>&nbsp;&nbsp;&nbsp;(-4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">failed to unlink() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5f8bab82e8bc81764892b297e716ac7"></a><!-- doxytag: member="nsock.h::NSOCK_ECONNECT" ref="ab5f8bab82e8bc81764892b297e716ac7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#ab5f8bab82e8bc81764892b297e716ac7">NSOCK_ECONNECT</a>&nbsp;&nbsp;&nbsp;(-5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">failed to connect() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a898349e46105dfde23bc44c998c882b7"></a><!-- doxytag: member="nsock.h::NSOCK_EFCNTL" ref="a898349e46105dfde23bc44c998c882b7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a898349e46105dfde23bc44c998c882b7">NSOCK_EFCNTL</a>&nbsp;&nbsp;&nbsp;(-6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">failed to fcntl() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6af373c87237b1ae9b8daa40cca9d48a"></a><!-- doxytag: member="nsock.h::NSOCK_EINVAL" ref="a6af373c87237b1ae9b8daa40cca9d48a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a6af373c87237b1ae9b8daa40cca9d48a">NSOCK_EINVAL</a>&nbsp;&nbsp;&nbsp;(-EINVAL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">-22, normally <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa52ee91165aeea3d09b1d857b6b4426"></a><!-- doxytag: member="nsock.h::NSOCK_TCP" ref="aaa52ee91165aeea3d09b1d857b6b4426" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#aaa52ee91165aeea3d09b1d857b6b4426">NSOCK_TCP</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">use tcp mode <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a114497e2b62c538aa90760a15559a7be"></a><!-- doxytag: member="nsock.h::NSOCK_UDP" ref="a114497e2b62c538aa90760a15559a7be" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a114497e2b62c538aa90760a15559a7be">NSOCK_UDP</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">use udp mode <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a71aae04fe3edaa4032791957b97f21d7"></a><!-- doxytag: member="nsock.h::NSOCK_UNLINK" ref="a71aae04fe3edaa4032791957b97f21d7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a71aae04fe3edaa4032791957b97f21d7">NSOCK_UNLINK</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unlink existing path (only nsock_unix) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85e3414ae9a0618e6bc873b205e0f572"></a><!-- doxytag: member="nsock.h::NSOCK_REUSE" ref="a85e3414ae9a0618e6bc873b205e0f572" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a85e3414ae9a0618e6bc873b205e0f572">NSOCK_REUSE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">reuse existing address <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a408ebfcac776e538f3b8ef3d7297d3c4"></a><!-- doxytag: member="nsock.h::NSOCK_CONNECT" ref="a408ebfcac776e538f3b8ef3d7297d3c4" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a408ebfcac776e538f3b8ef3d7297d3c4">NSOCK_CONNECT</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 3)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">connect rather than create <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7eff0af0a004baf44aad5c7c4a1e5b47"></a><!-- doxytag: member="nsock.h::NSOCK_BLOCK" ref="a7eff0af0a004baf44aad5c7c4a1e5b47" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a7eff0af0a004baf44aad5c7c4a1e5b47">NSOCK_BLOCK</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">socket should be in blocking mode <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#adcaaf011dcd99b0d782cc2b89736f2cf">nsock_strerror</a> (int code)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Grab an error string relating to <a class="el" href="nsock_8h.html#a698ebbdfe5e3589dd9e2d466d87ceb5a" title="Create or connect to a unix socket To control permissions on sockets when NSOCK_LISTEN...">nsock_unix()</a>.  <a href="#adcaaf011dcd99b0d782cc2b89736f2cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a698ebbdfe5e3589dd9e2d466d87ceb5a">nsock_unix</a> (const char *path, unsigned int flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create or connect to a unix socket To control permissions on sockets when NSOCK_LISTEN is specified, callers will have to modify their umask() before (and possibly after) the <a class="el" href="nsock_8h.html#a698ebbdfe5e3589dd9e2d466d87ceb5a" title="Create or connect to a unix socket To control permissions on sockets when NSOCK_LISTEN...">nsock_unix()</a> call.  <a href="#a698ebbdfe5e3589dd9e2d466d87ceb5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a0469978df30212122748624f95e9c472">nsock_printf_nul</a> (int sd, const char *fmt,...) __attribute__((__format__(__printf__</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a nul-terminated message to the socket pointed to by sd.  <a href="#a0469978df30212122748624f95e9c472"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nsock_8h.html#a64d3bcce8f97099cacceb6f11bbbc52a">nsock_printf</a> (int sd, const char *fmt,...) __attribute__((__format__(__printf__</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a printf()-formatted string to the socket pointed to by sd.  <a href="#a64d3bcce8f97099cacceb6f11bbbc52a"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Nagios socket helper library. </p>
<p>This is a pretty stupid library, but since so many addons and now Nagios core itself makes use of sockets, we might as well have some simple wrappers for it that handle the most common cases. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a64d3bcce8f97099cacceb6f11bbbc52a"></a><!-- doxytag: member="nsock.h::nsock_printf" ref="a64d3bcce8f97099cacceb6f11bbbc52a" args="(int sd, const char *fmt,...) __attribute__((__format__(__printf__" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int int nsock_printf </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a printf()-formatted string to the socket pointed to by sd. </p>
<p>This is identical to dprintf(), which is unfortunately GNU only. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function may block, so poll(2) for writability </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sd</em>&nbsp;</td><td>The socket to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>The format string </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Whatever write() returns </dd></dl>

</div>
</div>
<a class="anchor" id="a0469978df30212122748624f95e9c472"></a><!-- doxytag: member="nsock.h::nsock_printf_nul" ref="a0469978df30212122748624f95e9c472" args="(int sd, const char *fmt,...) __attribute__((__format__(__printf__" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nsock_printf_nul </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a nul-terminated message to the socket pointed to by sd. </p>
<p>This isn't quite the same as dprintf(), which doesn't include the terminating nul byte. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function may block, so poll(2) for writability </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sd</em>&nbsp;</td><td>The socket to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>The format string </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Whatever write() returns </dd></dl>

</div>
</div>
<a class="anchor" id="adcaaf011dcd99b0d782cc2b89736f2cf"></a><!-- doxytag: member="nsock.h::nsock_strerror" ref="adcaaf011dcd99b0d782cc2b89736f2cf" args="(int code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* nsock_strerror </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>code</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Grab an error string relating to <a class="el" href="nsock_8h.html#a698ebbdfe5e3589dd9e2d466d87ceb5a" title="Create or connect to a unix socket To control permissions on sockets when NSOCK_LISTEN...">nsock_unix()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>code</em>&nbsp;</td><td>The error code return by the nsock library </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An error string describing the error </dd></dl>

</div>
</div>
<a class="anchor" id="a698ebbdfe5e3589dd9e2d466d87ceb5a"></a><!-- doxytag: member="nsock.h::nsock_unix" ref="a698ebbdfe5e3589dd9e2d466d87ceb5a" args="(const char *path, unsigned int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nsock_unix </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create or connect to a unix socket To control permissions on sockets when NSOCK_LISTEN is specified, callers will have to modify their umask() before (and possibly after) the <a class="el" href="nsock_8h.html#a698ebbdfe5e3589dd9e2d466d87ceb5a" title="Create or connect to a unix socket To control permissions on sockets when NSOCK_LISTEN...">nsock_unix()</a> call. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>The path to connect to or create </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Various options controlling the mode of the socket </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An NSOCK_E macro on errors, the created socket on succes </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 9 Sep 2017 for Nagios by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
