<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nagios: fanout.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>fanout.h File Reference</h1>
<p>Simple fanout table implementation.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="lnag-utils_8h_source.html">lnag-utils.h</a>&quot;</code><br/>

<p><a href="fanout_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae080da7798ee92f6fe63fd99384d92a"></a><!-- doxytag: member="fanout.h::fanout_table" ref="aae080da7798ee92f6fe63fd99384d92a" args="" -->
typedef <br class="typebreak"/>
typedefNAGIOS_BEGIN_DECL <br class="typebreak"/>
struct <a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Primary (opaque) type for this api. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fanout_8h.html#a49f13e43bf51ef34c7aae62ef33d74a0">fanout_create</a> (unsigned long size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a fanout table.  <a href="#a49f13e43bf51ef34c7aae62ef33d74a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fanout_8h.html#abdd64908339b7ec3af9bae2eda1222c9">fanout_destroy</a> (<a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *t, void(*destructor)(void *))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy a fanout table, with optional destructor.  <a href="#abdd64908339b7ec3af9bae2eda1222c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fanout_8h.html#a1f99dbfe7905f4dfb742a26ba5fa212e">fanout_get</a> (<a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *t, unsigned long key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a pointer from the fanout table t.  <a href="#a1f99dbfe7905f4dfb742a26ba5fa212e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fanout_8h.html#ad1cbfc3dbf61cc791b551b31463bdf4d">fanout_add</a> (<a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *t, unsigned long key, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add an entry to the fanout table.  <a href="#ad1cbfc3dbf61cc791b551b31463bdf4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fanout_8h.html#adbd76c7b84d983f84951630596f3d86d">fanout_remove</a> (<a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *t, unsigned long key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove an entry from the fanout table and return its data.  <a href="#adbd76c7b84d983f84951630596f3d86d"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Simple fanout table implementation. </p>
<p>Fanouts are useful to hold short-lived integer-indexed data where the keyspan between smallest and largest key can be too large and change too often for it to be practical to maintain a growing array. If you think of it as a hash-table optimized for unsigned longs you've got the right idea. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad1cbfc3dbf61cc791b551b31463bdf4d"></a><!-- doxytag: member="fanout.h::fanout_add" ref="ad1cbfc3dbf61cc791b551b31463bdf4d" args="(fanout_table *t, unsigned long key, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fanout_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add an entry to the fanout table. </p>
<p>Note that we don't check if the key is unique. If it isn't, <a class="el" href="fanout_8h.html#adbd76c7b84d983f84951630596f3d86d" title="Remove an entry from the fanout table and return its data.">fanout_remove()</a> will remove the latest added first.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>t</em>&nbsp;</td><td>fanout table to add to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>Key for this entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>Data to add. Must not be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 on errors </dd></dl>

</div>
</div>
<a class="anchor" id="a49f13e43bf51ef34c7aae62ef33d74a0"></a><!-- doxytag: member="fanout.h::fanout_create" ref="a49f13e43bf51ef34c7aae62ef33d74a0" args="(unsigned long size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a>* fanout_create </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a fanout table. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>The size of the table. Preferably a power of 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to a newly created table </dd></dl>

</div>
</div>
<a class="anchor" id="abdd64908339b7ec3af9bae2eda1222c9"></a><!-- doxytag: member="fanout.h::fanout_destroy" ref="abdd64908339b7ec3af9bae2eda1222c9" args="(fanout_table *t, void(*destructor)(void *))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fanout_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&nbsp;</td>
          <td class="paramname"> <em>destructor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy a fanout table, with optional destructor. </p>
<p>This function will iterate over all the entries in the fanout table and remove them, one by one. If 'destructor' is not NULL, it will be called on each and every object in the table. Note that 'free' is a valid destructor.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>t</em>&nbsp;</td><td>The fanout table to destroy </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destructor</em>&nbsp;</td><td>Function to call on data pointers in table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1f99dbfe7905f4dfb742a26ba5fa212e"></a><!-- doxytag: member="fanout.h::fanout_get" ref="a1f99dbfe7905f4dfb742a26ba5fa212e" args="(fanout_table *t, unsigned long key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* fanout_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return a pointer from the fanout table t. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>t</em>&nbsp;</td><td>table to fetch from </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key to fetch </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>NULL on errors; Pointer to data on success </dd></dl>

</div>
</div>
<a class="anchor" id="adbd76c7b84d983f84951630596f3d86d"></a><!-- doxytag: member="fanout.h::fanout_remove" ref="adbd76c7b84d983f84951630596f3d86d" args="(fanout_table *t, unsigned long key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* fanout_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fanout_8h.html#aae080da7798ee92f6fe63fd99384d92a">fanout_table</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove an entry from the fanout table and return its data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>t</em>&nbsp;</td><td>fanout table to look in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>The key whose data we should locate </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the data stored on success; NULL on errors </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 9 Sep 2017 for Nagios by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
